import{_ as y,m as g,f as C,u as b,c as i,b as s,d as h,t as c,F as u,r as m,o as d,n as p,w as _,v as w,e as F,g as k}from"./index-BdQ-tWa2.js";const D={name:"FoodCard",props:{foodItem:{type:Object,required:!0}},methods:{addFood(){this.store.addFood(this.foodItem.id)},removeFood(){this.store.removeFood(this.foodItem.id)}},computed:{store(){return b()},addedCount(){return this.store.dailyFoods.filter(t=>t===this.foodItem.id).length},food(){return C.find(t=>t.id===this.foodItem.id)},micronutrients(){return!this.food||!this.food.micronutrients?[]:Object.keys(this.food.micronutrients).map(t=>{const e=g.find(l=>l.id===t);return{name:e?e.name:t,points:this.food.micronutrients[t]}})}}},M={class:"food-card"},x={class:"food-content"},O={class:"category"},I={key:0,class:"micronutrients"},A={class:"micronutrients-list"},S={class:"buttons-container"},V={key:0,class:"added-count"},j={class:"buttons"};function B(t,e,l,v,r,n){return d(),i("div",M,[s("div",x,[s("h3",null,c(l.foodItem.name),1),s("p",O,c(l.foodItem.category),1),n.micronutrients.length>0?(d(),i("div",I,[s("div",A,[(d(!0),i(u,null,m(n.micronutrients,a=>(d(),i("span",{key:a.name,class:"nutrient-tag"},c(a.name),1))),128))])])):h("",!0)]),s("div",S,[n.addedCount>0?(d(),i("p",V,"Added: "+c(n.addedCount)+"x",1)):h("",!0),s("div",j,[s("button",{onClick:e[0]||(e[0]=a=>n.addFood()),class:"add-button"},"+"),n.addedCount>0?(d(),i("button",{key:0,onClick:e[1]||(e[1]=a=>n.removeFood()),class:"remove-button"},"-")):h("",!0)])])])}const N=y(D,[["render",B],["__scopeId","data-v-7005ecc6"]]),E={name:"AddFoodView",components:{FoodCard:N},data(){return{foods:C,micronuts:g,selectedCategory:"all",selectedMicro:"all",searched:"",isSorted:null,categoryDropdownOpen:!1,micronutrientDropdownOpen:!1}},computed:{filteredFoods(){return this.selectedCategory==="all"&&this.selectedMicro==="all"?this.foods:this.selectedCategory==="all"&&this.selectedMicro!=="all"?this.foods.filter(t=>Object.keys(t.micronutrients).some(e=>e===this.selectedMicro)):this.selectedCategory!=="all"&&this.selectedMicro==="all"?this.foods.filter(t=>t.category===this.selectedCategory):this.foods.filter(t=>t.category===this.selectedCategory&&Object.keys(t.micronutrients).some(e=>e===this.selectedMicro))},micronutrientIds(){return["all",...this.micronuts.map(t=>t.id)]},displayedFoods(){return this.sortFood(this.search(this.filteredFoods))}},methods:{setCategory(t){this.selectedCategory=t,this.$nextTick(()=>this.$refs.categoryDropdown?.blur())},setMicro(t){this.selectedMicro=t,this.$nextTick(()=>this.$refs.micronutrientDropdown?.blur())},search(t){const e=this.searched.toLowerCase();return e?t.filter(l=>l.name.toLowerCase().startsWith(e)):t},sortFood(t){return this.isSorted?[...t].sort((e,l)=>e.name.localeCompare(l.name,"sk")):t},toggleSort(){this.isSorted=!this.isSorted},maybeCloseCategoryDropdown(t){this.categoryDropdownOpen&&(document.activeElement?.blur(),t.preventDefault())},maybeCloseMicronutrientDropdown(t){this.micronutrientDropdownOpen&&(document.activeElement?.blur(),t.preventDefault())}}},L={class:"add-food"},T={class:"filters"},U={class:"filter-dropdown-content category-dropdown-content"},q=["onClick"],z={class:"filter-dropdown-content micronutrient-dropdown-content"},W=["onClick"],Z={class:"search-bar"},G={key:0,class:"foods-list"},H={key:1,class:"no-foods-text"};function J(t,e,l,v,r,n){const a=F("FoodCard");return d(),i("div",L,[s("div",T,[s("div",{ref:"categoryDropdown",class:"filter-dropdown",tabindex:"0",onFocusin:e[1]||(e[1]=o=>r.categoryDropdownOpen=!0),onFocusout:e[2]||(e[2]=o=>r.categoryDropdownOpen=!1)},[s("button",{type:"button",class:"filter-dropdown-trigger category-trigger",onMousedown:e[0]||(e[0]=o=>n.maybeCloseCategoryDropdown(o))}," Category: "+c(r.selectedCategory==="all"?"All":r.selectedCategory.charAt(0).toUpperCase()+r.selectedCategory.slice(1))+" ▼ ",33),s("div",U,[(d(),i(u,null,m(["all","vegetable","fruit","meat","fish"],o=>s("button",{key:o,onClick:f=>n.setCategory(o),class:p(["category-filter-button",{active:r.selectedCategory===o}])},c(o==="all"?"All":o.charAt(0).toUpperCase()+o.slice(1)),11,q)),64))])],544),s("div",{ref:"micronutrientDropdown",class:"filter-dropdown",tabindex:"0",onFocusin:e[4]||(e[4]=o=>r.micronutrientDropdownOpen=!0),onFocusout:e[5]||(e[5]=o=>r.micronutrientDropdownOpen=!1)},[s("button",{type:"button",class:"filter-dropdown-trigger micronutrient-trigger",onMousedown:e[3]||(e[3]=o=>n.maybeCloseMicronutrientDropdown(o))}," Micronutrient: "+c(r.selectedMicro==="all"?"All":r.micronuts.find(o=>o.id===r.selectedMicro)?.name??r.selectedMicro)+" ▼ ",33),s("div",z,[(d(!0),i(u,null,m(n.micronutrientIds,o=>(d(),i("button",{key:o,onClick:f=>n.setMicro(o),class:p(["micronutrient-filter-button",{active:r.selectedMicro===o}])},c(o==="all"?"All":r.micronuts.find(f=>f.id===o)?.name??o),11,W))),128))])],544),s("button",{onClick:e[6]||(e[6]=(...o)=>n.toggleSort&&n.toggleSort(...o)),class:p(["sort-button",{active:r.isSorted}])},"A-Z",2)]),s("div",Z,[_(s("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=o=>r.searched=o),placeholder:"Food name..."},null,512),[[w,r.searched]])]),n.displayedFoods.length>0?(d(),i("div",G,[(d(!0),i(u,null,m(n.displayedFoods,o=>(d(),k(a,{key:o.id,foodItem:o},null,8,["foodItem"]))),128))])):(d(),i("div",H,[...e[8]||(e[8]=[s("p",null,"No foods found... change filters!",-1)])]))])}const P=y(E,[["render",J],["__scopeId","data-v-21596a73"]]);export{P as default};
