import{_ as p,M as g,F as y,u as C,c as i,b as s,d as v,t as c,e as f,r as m,o as d,n as u,w as b,v as w,f as _,g as k}from"./index-BMvTExza.js";const D={name:"FoodCard",props:{foodItem:{type:Object,required:!0}},methods:{addFood(){this.store.addFood(this.foodItem.id)},removeFood(){this.store.removeFood(this.foodItem.id)},addToFavorite(){const t=this.foodItem.id,e=this.store.favoriteFoods.indexOf(t);e===-1?this.store.favoriteFoods.push(t):this.store.favoriteFoods.splice(e,1)}},computed:{store(){return C()},addedCount(){return this.store.dailyFoods.filter(t=>t===this.foodItem.id).length},food(){return y.find(t=>t.id===this.foodItem.id)},micronutrients(){return!this.food||!this.food.micronutrients?[]:Object.keys(this.food.micronutrients).map(t=>{const e=g.find(l=>l.id===t);return{name:e?e.name:t,points:this.food.micronutrients[t]}})}}},M={class:"food-card"},x={class:"food-content"},S={class:"category"},O={key:0,class:"micronutrients"},I={class:"micronutrients-list"},A={class:"buttons-container"},T={key:0,class:"added-count"},V={class:"buttons"},j={class:"button-box"};function B(t,e,l,F,n,r){return d(),i("div",M,[s("div",x,[s("h3",null,c(l.foodItem.name),1),s("p",S,c(l.foodItem.category),1),r.micronutrients.length>0?(d(),i("div",O,[s("div",I,[(d(!0),i(f,null,m(r.micronutrients,a=>(d(),i("span",{key:a.name,class:"nutrient-tag"},c(a.name),1))),128))])])):v("",!0)]),s("div",A,[r.addedCount>0?(d(),i("p",T,"Added: "+c(r.addedCount)+"x",1)):v("",!0),s("div",V,[s("button",{onClick:e[0]||(e[0]=a=>r.addFood()),class:"add-button"},"+"),r.addedCount>0?(d(),i("button",{key:0,onClick:e[1]||(e[1]=a=>r.removeFood()),class:"remove-button"},"-")):v("",!0)])]),s("div",j,[s("button",{onClick:e[2]||(e[2]=(...a)=>r.addToFavorite&&r.addToFavorite(...a))},"Fav")])])}const N=p(D,[["render",B],["__scopeId","data-v-73b10750"]]),E={name:"AddFoodView",components:{FoodCard:N},data(){return{foods:y,micronuts:g,selectedCategory:"all",selectedMicro:"all",searched:"",isSorted:null,categoryDropdownOpen:!1,micronutrientDropdownOpen:!1,favShowed:null}},computed:{store(){return C()},filteredFoods(){return this.selectedCategory==="all"&&this.selectedMicro==="all"?this.foods:this.selectedCategory==="all"&&this.selectedMicro!=="all"?this.foods.filter(t=>Object.keys(t.micronutrients).some(e=>e===this.selectedMicro)):this.selectedCategory!=="all"&&this.selectedMicro==="all"?this.foods.filter(t=>t.category===this.selectedCategory):this.foods.filter(t=>t.category===this.selectedCategory&&Object.keys(t.micronutrients).some(e=>e===this.selectedMicro))},micronutrientIds(){return["all",...this.micronuts.map(t=>t.id)]},displayedFoods(){return this.showFav(this.sortFood(this.search(this.filteredFoods)))}},methods:{setCategory(t){this.selectedCategory=t,this.$nextTick(()=>this.$refs.categoryDropdown?.blur())},setMicro(t){this.selectedMicro=t,this.$nextTick(()=>this.$refs.micronutrientDropdown?.blur())},search(t){const e=this.searched.toLowerCase();return e?t.filter(l=>l.name.toLowerCase().startsWith(e)):t},sortFood(t){return this.isSorted?[...t].sort((e,l)=>e.name.localeCompare(l.name,"sk")):t},showFav(t){if(this.favShowed){const e=this.store.favoriteFoods||[];return t.filter(l=>e.indexOf(l.id)!==-1)}return t},toggleFav(){this.favShowed=!this.favShowed},toggleSort(){this.isSorted=!this.isSorted},maybeCloseCategoryDropdown(t){this.categoryDropdownOpen&&(document.activeElement?.blur(),t.preventDefault())},maybeCloseMicronutrientDropdown(t){this.micronutrientDropdownOpen&&(document.activeElement?.blur(),t.preventDefault())}}},L={class:"add-food"},U={class:"filters"},q={class:"filter-dropdown-content category-dropdown-content"},z=["onClick"],W={class:"filter-dropdown-content micronutrient-dropdown-content"},Z=["onClick"],G={class:"search-bar"},H={key:0,class:"foods-list"},J={key:1,class:"no-foods-text"};function K(t,e,l,F,n,r){const a=_("FoodCard");return d(),i("div",L,[s("div",U,[s("div",{ref:"categoryDropdown",class:"filter-dropdown",tabindex:"0",onFocusin:e[1]||(e[1]=o=>n.categoryDropdownOpen=!0),onFocusout:e[2]||(e[2]=o=>n.categoryDropdownOpen=!1)},[s("button",{type:"button",class:"filter-dropdown-trigger category-trigger",onMousedown:e[0]||(e[0]=o=>r.maybeCloseCategoryDropdown(o))}," Category: "+c(n.selectedCategory==="all"?"All":n.selectedCategory.charAt(0).toUpperCase()+n.selectedCategory.slice(1))+" ▼ ",33),s("div",q,[(d(),i(f,null,m(["all","vegetable","fruit","meat","fish"],o=>s("button",{key:o,onClick:h=>r.setCategory(o),class:u(["category-filter-button",{active:n.selectedCategory===o}])},c(o==="all"?"All":o.charAt(0).toUpperCase()+o.slice(1)),11,z)),64))])],544),s("div",{ref:"micronutrientDropdown",class:"filter-dropdown",tabindex:"0",onFocusin:e[4]||(e[4]=o=>n.micronutrientDropdownOpen=!0),onFocusout:e[5]||(e[5]=o=>n.micronutrientDropdownOpen=!1)},[s("button",{type:"button",class:"filter-dropdown-trigger micronutrient-trigger",onMousedown:e[3]||(e[3]=o=>r.maybeCloseMicronutrientDropdown(o))}," Micronutrient: "+c(n.selectedMicro==="all"?"All":n.micronuts.find(o=>o.id===n.selectedMicro)?.name??n.selectedMicro)+" ▼ ",33),s("div",W,[(d(!0),i(f,null,m(r.micronutrientIds,o=>(d(),i("button",{key:o,onClick:h=>r.setMicro(o),class:u(["micronutrient-filter-button",{active:n.selectedMicro===o}])},c(o==="all"?"All":n.micronuts.find(h=>h.id===o)?.name??o),11,Z))),128))])],544),s("button",{onClick:e[6]||(e[6]=(...o)=>r.toggleSort&&r.toggleSort(...o)),class:u(["sort-button",{active:n.isSorted}])},"A-Z",2),s("button",{onClick:e[7]||(e[7]=(...o)=>r.toggleFav&&r.toggleFav(...o)),class:u(["fav-button",{active:n.favShowed}])},"Favorite",2)]),s("div",G,[b(s("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=o=>n.searched=o),placeholder:"Food name..."},null,512),[[w,n.searched]])]),r.displayedFoods.length>0?(d(),i("div",H,[(d(!0),i(f,null,m(r.displayedFoods,o=>(d(),k(a,{key:o.id,foodItem:o},null,8,["foodItem"]))),128))])):(d(),i("div",J,[...e[9]||(e[9]=[s("p",null,"No foods found... change filters!",-1)])]))])}const Q=p(E,[["render",K],["__scopeId","data-v-14732875"]]);export{Q as default};
