import{_ as y,c as d,b as i,n as S,o as n,M as _,F,u as k,d as h,e as p,r as g,t as c,f as v,g as m,w as M,T as D,h as O,v as V,i as u,j as L}from"./index-CqHucJ5S.js";const b={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},I={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:t=>["horizontal","vertical","both","none"].includes(t)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return b[this.type]||b.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},z=["width","height","viewBox"],A=["d"];function T(t,e,l,w,r,s){return n(),d("svg",{width:s.sizeValue,height:s.sizeValue,viewBox:s.viewboxValue,style:S(s.styles)},[i("path",{d:l.path},null,8,A)],12,z)}const x=y(I,[["render",T],["__scopeId","data-v-76aa6b74"]]);var N="M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z",H="M15,19.88C15.04,20.18 14.94,20.5 14.71,20.71C14.32,21.1 13.69,21.1 13.3,20.71L9.29,16.7C9.06,16.47 8.96,16.16 9,15.87V10.75L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L15,10.75V19.88M7.04,5L11,10.06V15.58L13,17.58V10.05L16.96,5H7.04Z",B="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z",j="M12.1,18.55L12,18.65L11.89,18.55C7.14,14.24 4,11.39 4,8.5C4,6.5 5.5,5 7.5,5C9.04,5 10.54,6 11.07,7.36H12.93C13.46,6 14.96,5 16.5,5C18.5,5 20,6.5 20,8.5C20,11.39 16.86,14.24 12.1,18.55M16.5,3C14.76,3 13.09,3.81 12,5.08C10.91,3.81 9.24,3 7.5,3C4.42,3 2,5.41 2,8.5C2,12.27 5.4,15.36 10.55,20.03L12,21.35L13.45,20.03C18.6,15.36 22,12.27 22,8.5C22,5.41 19.58,3 16.5,3Z";const Z={name:"FoodCard",components:{SvgIcon:x},data(){return{path:B,pathOutlined:j}},props:{foodItem:{type:Object,required:!0}},methods:{addFood(){this.store.addFood(this.foodItem.id)},removeFood(){this.store.removeFood(this.foodItem.id)},addToFavorite(){const t=this.foodItem.id,e=this.store.favoriteFoods.indexOf(t);e===-1?this.store.favoriteFoods.push(t):this.store.favoriteFoods.splice(e,1)}},computed:{store(){return k()},isFavorite(){const t=this.foodItem.id;return this.store.favoriteFoods.indexOf(t)!==-1},addedCount(){return this.store.dailyFoods.filter(t=>t===this.foodItem.id).length},food(){return F.find(t=>t.id===this.foodItem.id)},micronutrients(){return!this.food||!this.food.micronutrients?[]:Object.keys(this.food.micronutrients).map(t=>{const e=_.find(l=>l.id===t);return{name:e?e.name:t,points:this.food.micronutrients[t]}})}}},q={class:"food-card"},E={class:"food-content"},U={class:"name-row"},W={class:"category"},G={key:0,class:"micronutrients"},J={class:"micronutrients-list"},K={class:"buttons-container"},P={key:0,class:"added-count"},Q={class:"buttons"};function R(t,e,l,w,r,s){const f=g("svg-icon");return n(),d("div",q,[i("div",E,[i("div",U,[s.isFavorite?(n(),d("button",{key:0,class:"fav-button-filled",onClick:e[0]||(e[0]=(...a)=>s.addToFavorite&&s.addToFavorite(...a))},[p(f,{type:"mdi",path:r.path},null,8,["path"])])):(n(),d("button",{key:1,class:"fav-button-outlined",onClick:e[1]||(e[1]=(...a)=>s.addToFavorite&&s.addToFavorite(...a))},[p(f,{type:"mdi",path:r.pathOutlined},null,8,["path"])])),i("h3",null,c(l.foodItem.name),1)]),i("p",W,c(l.foodItem.category),1),s.micronutrients.length>0?(n(),d("div",G,[i("div",J,[(n(!0),d(v,null,m(s.micronutrients,a=>(n(),d("span",{key:a.name,class:"nutrient-tag"},c(a.name),1))),128))])])):h("",!0)]),i("div",K,[s.addedCount>0?(n(),d("p",P,"Added: "+c(s.addedCount)+"x",1)):h("",!0),i("div",Q,[i("button",{onClick:e[2]||(e[2]=a=>s.addFood()),class:"add-button"},"+"),s.addedCount>0?(n(),d("button",{key:0,onClick:e[3]||(e[3]=a=>s.removeFood()),class:"remove-button"},"-")):h("",!0)])])])}const X=y(Z,[["render",R],["__scopeId","data-v-01dd3551"]]),Y={name:"AddFoodView",components:{FoodCard:X,SvgIcon:x},data(){return{foods:F,micronuts:_,selectedCategory:"all",selectedMicro:"all",searched:"",isSorted:null,categoryDropdownOpen:!1,micronutrientDropdownOpen:!1,favShowed:null,filtersShowed:!0,filter:N,filterOutlined:H}},computed:{store(){return k()},filteredFoods(){return this.selectedCategory==="all"&&this.selectedMicro==="all"?this.foods:this.selectedCategory==="all"&&this.selectedMicro!=="all"?this.foods.filter(t=>Object.keys(t.micronutrients).some(e=>e===this.selectedMicro)):this.selectedCategory!=="all"&&this.selectedMicro==="all"?this.foods.filter(t=>t.category===this.selectedCategory):this.foods.filter(t=>t.category===this.selectedCategory&&Object.keys(t.micronutrients).some(e=>e===this.selectedMicro))},micronutrientIds(){return["all",...this.micronuts.map(t=>t.id)]},displayedFoods(){return this.showFav(this.sortFood(this.search(this.filteredFoods)))}},methods:{setCategory(t){this.selectedCategory=t,this.$nextTick(()=>this.$refs.categoryDropdown?.blur())},setMicro(t){this.selectedMicro=t,this.$nextTick(()=>this.$refs.micronutrientDropdown?.blur())},search(t){const e=this.searched.toLowerCase();return e?t.filter(l=>l.name.toLowerCase().startsWith(e)):t},sortFood(t){return this.isSorted?[...t].sort((e,l)=>e.name.localeCompare(l.name,"sk")):t},showFav(t){if(this.favShowed){const e=this.store.favoriteFoods||[];return t.filter(l=>e.indexOf(l.id)!==-1)}return t},toggleFav(){this.favShowed=!this.favShowed},toggleSort(){this.isSorted=!this.isSorted},maybeCloseCategoryDropdown(t){this.categoryDropdownOpen&&(document.activeElement?.blur(),t.preventDefault())},maybeCloseMicronutrientDropdown(t){this.micronutrientDropdownOpen&&(document.activeElement?.blur(),t.preventDefault())},showFilters(){this.filtersShowed=!this.filtersShowed}}},$={class:"add-food"},ee={key:0,class:"filters-wrapper"},te={class:"filters"},oe={class:"filter-dropdown-content category-dropdown-content"},se=["onClick"],re={class:"filter-dropdown-content micronutrient-dropdown-content"},ie=["onClick"],ne={class:"search-row"},de={class:"search-bar"},le={class:"toggle-filters"},ae={key:0,class:"foods-list"},ce={key:1,class:"no-foods-text"};function ue(t,e,l,w,r,s){const f=g("svg-icon"),a=g("FoodCard");return n(),d("div",$,[p(D,{name:"filters-slide"},{default:M(()=>[r.filtersShowed?(n(),d("div",ee,[i("div",te,[i("div",{ref:"categoryDropdown",class:"filter-dropdown",tabindex:"0",onFocusin:e[1]||(e[1]=o=>r.categoryDropdownOpen=!0),onFocusout:e[2]||(e[2]=o=>r.categoryDropdownOpen=!1)},[i("button",{type:"button",class:"filter-dropdown-trigger category-trigger",onMousedown:e[0]||(e[0]=o=>s.maybeCloseCategoryDropdown(o))}," Category: "+c(r.selectedCategory==="all"?"All":r.selectedCategory.charAt(0).toUpperCase()+r.selectedCategory.slice(1))+" ▼ ",33),i("div",oe,[(n(),d(v,null,m(["all","vegetable","fruit","meat","fish"],o=>i("button",{key:o,onClick:C=>s.setCategory(o),class:u(["category-filter-button",{active:r.selectedCategory===o}])},c(o==="all"?"All":o.charAt(0).toUpperCase()+o.slice(1)),11,se)),64))])],544),i("div",{ref:"micronutrientDropdown",class:"filter-dropdown",tabindex:"0",onFocusin:e[4]||(e[4]=o=>r.micronutrientDropdownOpen=!0),onFocusout:e[5]||(e[5]=o=>r.micronutrientDropdownOpen=!1)},[i("button",{type:"button",class:"filter-dropdown-trigger micronutrient-trigger",onMousedown:e[3]||(e[3]=o=>s.maybeCloseMicronutrientDropdown(o))}," Micronutrient: "+c(r.selectedMicro==="all"?"All":r.micronuts.find(o=>o.id===r.selectedMicro)?.name??r.selectedMicro)+" ▼ ",33),i("div",re,[(n(!0),d(v,null,m(s.micronutrientIds,o=>(n(),d("button",{key:o,onClick:C=>s.setMicro(o),class:u(["micronutrient-filter-button",{active:r.selectedMicro===o}])},c(o==="all"?"All":r.micronuts.find(C=>C.id===o)?.name??o),11,ie))),128))])],544),i("button",{onClick:e[6]||(e[6]=(...o)=>s.toggleSort&&s.toggleSort(...o)),class:u(["sort-button",{active:r.isSorted}])},"A-Z",2),i("button",{onClick:e[7]||(e[7]=(...o)=>s.toggleFav&&s.toggleFav(...o)),class:u(["fav-button",{active:r.favShowed}])},"Favorite",2)])])):h("",!0)]),_:1}),i("div",ne,[i("div",de,[O(i("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=o=>r.searched=o),placeholder:"Food name..."},null,512),[[V,r.searched]])]),i("div",le,[i("button",{onClick:e[9]||(e[9]=(...o)=>s.showFilters&&s.showFilters(...o)),class:u(["toggle-filters-button",{active:r.filtersShowed}])},[p(f,{type:"mdi",path:r.filtersShowed?r.filter:r.filterOutlined},null,8,["path"])],2)])]),s.displayedFoods.length>0?(n(),d("div",ae,[(n(!0),d(v,null,m(s.displayedFoods,o=>(n(),L(a,{key:o.id,foodItem:o},null,8,["foodItem"]))),128))])):(n(),d("div",ce,[...e[10]||(e[10]=[i("p",null,"No foods found... change filters!",-1)])]))])}const he=y(Y,[["render",ue],["__scopeId","data-v-c89d3427"]]);export{he as default};
