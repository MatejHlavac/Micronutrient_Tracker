import{_ as w,c as o,b as n,t as m,o as s,M as k,F as H,u as D,d as C,e as y,r as l,f,g as p}from"./index-CsCwMiEs.js";import{N as g}from"./NutrientCard-CvgsW6PT.js";const x={name:"HistoryDayCard",props:{dayData:{type:Object,required:!0},dayKey:{type:Object,required:!0}},computed:{date(){return new Date(this.dayKey+"T00:00:00")},dayInWeek(){return new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(this.date)},fullDate(){return new Intl.DateTimeFormat("en-US",{day:"numeric",month:"numeric",year:"numeric"}).format(this.date)}},methods:{showDayContent(){this.$emit("show-content",this.dayKey)}}},I={class:"day-name"},F={class:"day-full-date"};function S(e,r,c,u,a,t){return s(),o("div",{class:"history-day-card",onClick:r[0]||(r[0]=(...d)=>t.showDayContent&&t.showDayContent(...d))},[n("div",I,m(t.dayInWeek),1),n("div",F,m(t.fullDate),1)])}const V=w(x,[["render",S],["__scopeId","data-v-ed9de09d"]]),b={name:"HistoryFoodCard",props:{foodId:{type:String,required:!0}},computed:{store(){return D()},food(){return H.find(e=>e.id===this.foodId)},micronutrients(){return!this.food||!this.food.micronutrients?[]:Object.keys(this.food.micronutrients).map(e=>k.find(c=>c.id===e).name)}}},N={key:0,class:"food-card"},$={class:"food-content"},j={class:"category"},O={key:0,class:"micronutrients"},B={class:"micronutrients-list"};function K(e,r,c,u,a,t){return t.food?(s(),o("div",N,[n("div",$,[n("h3",null,m(t.food.name),1),n("p",j,m(t.food.category),1),t.micronutrients.length>0?(s(),o("div",O,[n("div",B,[(s(!0),o(y,null,l(t.micronutrients,d=>(s(),o("span",{key:d,class:"nutrient-tag"},m(d),1))),128))])])):C("",!0)])])):C("",!0)}const M=w(b,[["render",K],["__scopeId","data-v-147bd43e"]]),W={name:"HistoryView",components:{HistoryDayCard:V,HistoryFoodCard:M,NutrientCard:g},data(){return{showedContent:""}},methods:{micronutrientsWithStats(e){return Object.keys(this.store.weeklyHistory[e].stats).map(u=>{const a=k.find(_=>_.id===u),t=a.maxValue,d=this.store.weeklyHistory[e].stats[u],h=Math.min(d/t*100,100);return{id:a.id,name:a.name,type:a.type,currentValue:d,maxValue:t,percentage:h}})},showContent(e){!this.showedContent||this.showedContent!==e?this.showedContent=e:this.showedContent=""}},computed:{store(){return D()},history(){return this.store.weeklyHistory||{}},sortedHistoryEntries(){return Object.entries(this.history).sort((e,r)=>e[0].localeCompare(r[0]))},emptyContainersCount(){return Math.max(0,7-Object.keys(this.history).length)}}},q={class:"history-page"},E={class:"history-cards"},T={key:0,class:"day-content"},U={class:"day-content-left"},L={class:"day-content-right"};function Y(e,r,c,u,a,t){const d=f("HistoryDayCard"),h=f("HistoryFoodCard"),_=f("NutrientCard");return s(),o("div",q,[r[1]||(r[1]=n("h2",{class:"history-title"},"Your 7 days history",-1)),n("div",E,[(s(!0),o(y,null,l(t.emptyContainersCount,i=>(s(),o("div",{key:"empty-"+i,class:"empty-container"},[...r[0]||(r[0]=[n("span",{class:"empty-container-text"},"No data",-1)])]))),128)),(s(!0),o(y,null,l(t.sortedHistoryEntries,([i,v])=>(s(),p(d,{key:i,dayData:v,dayKey:i,onShowContent:t.showContent},null,8,["dayData","dayKey","onShowContent"]))),128))]),a.showedContent?(s(),o("div",T,[n("div",U,[(s(!0),o(y,null,l(t.store.weeklyHistory[a.showedContent].foods,i=>(s(),p(h,{key:i,foodId:i},null,8,["foodId"]))),128))]),n("div",L,[(s(!0),o(y,null,l(t.micronutrientsWithStats(a.showedContent),i=>(s(),p(_,{key:i.id,nutrient:i},null,8,["nutrient"]))),128))])])):C("",!0)])}const G=w(W,[["render",Y],["__scopeId","data-v-d8df0564"]]);export{G as default};
